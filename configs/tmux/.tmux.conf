# # Initialize session & windows
new-session -s dev -n edit -d 'zsh'
send-keys -t dev:edit 'cd janet/backend && nvim .' C-m

# Create split for code testing (3:1 ratio)
new-window -n test 'zsh'
split-window -v 'zsh'
select-layout even-vertical
resize-pane -D 30

# Create run window with vertical split (3:1 ratio)
new-window -n run 'zsh'
split-window -h 'zsh'
send-keys -t 1 'cd janet/backend && watch --color -n 1 tree -C -L 2 .' C-m
select-layout even-horizontal
resize-pane -R 30

new-window -n git 'zsh'
select-window -t 1

# Core settings
set -g mouse on
set -g default-terminal "tmux-256color"
set-option -g status-position top
set -g automatic-rename off
set -g allow-rename off

# Remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Vim keybindings & clipboard
set-window-option -g mode-keys vi
set -g set-clipboard on

# Simple theme with light gray background
set -g status-style "bg=#e4e4e4"
set -g status-left-length 100
set -g status-right-length 100

# Window tabs format
set -g window-status-format "#[fg=#4a4a4a,bg=#e4e4e4] #I #W "
set -g window-status-current-format "#[fg=#e4e4e4,bg=#4a4a4a,bold] #I #W "
set -g status-left ""
set -g status-right " #S "

# Optional: If you still want CPU and battery info
run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux
run ~/.config/tmux/plugins/tmux-plugins/tmux-battery/battery.tmux
set -ag status-right "CPU: #{cpu_percentage} | BAT: #{battery_percentage} "

# Forward SSH auth
set-environment -g 'SSH_AUTH_SOCK' ~/.ssh/ssh_auth_sock
